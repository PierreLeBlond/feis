<script lang="ts">
  import Navigation from "./navigation/Navigation.svelte";
  import { fade, fly } from "svelte/transition";
  import { createDialog, melt } from "@melt-ui/svelte";
  import { Menu } from "lucide-svelte";
  import LightSwitch from "./components/ui/LightSwitch.svelte";

  const {
    elements: { trigger, portalled, overlay, content, title },
    states: { open },
  } = createDialog();
</script>

<header
  class="fixed top-0 z-50 flex h-12 w-screen items-center justify-between border-b-2 border-yellow-400 bg-stone-100 px-4 dark:bg-stone-800"
>
  <a href="#presentation">
    <svg
      class="h-12 w-12 fill-stone-900 dark:fill-stone-100"
      viewBox="0 0 119 40"
    >
      <path
        d="m 18.882184,34.177232 c -0.0301,-2.90694 -0.14523,-6.06328 -0.25587,-7.0141 -0.56169,-4.82727 -1.84079,-8.50317 -3.92271,-11.27321 l -0.80598,-1.07238 -1.04235,-0.90159 C 9.9984936,11.444882 6.0608736,10.086762 1.2791646,9.9232216 l -1.26014095,-0.0431 -0.01764,-4.56845 c -0.0097,-2.51265 0.03265,-4.61918999 0.09413,-4.68119999 0.06146,-0.062 15.94496035,-0.18085 35.29662035,-0.26409 l 35.18483,-0.15135 0.0202,4.69481999 0.0202,4.69481 -24.38957,0.10549 -24.38958,0.10549 0.90753,1.3092904 c 0.49915,0.72011 1.33522,2.14163 1.85792,3.15893 l 0.95039,1.84964 6.36823,-0.026 6.36822,-0.026 0.0179,4.63696 0.0179,4.63695 -5.25863,0.0247 -5.25863,0.0247 0.14969,1.26704 c 0.0823,0.69688 0.17489,3.87752 0.2057,7.06808 l 0.056,5.80104 -4.58766,0.0218 c -2.5232,0.012 -4.61203,-0.006 -4.64182,-0.0393 -0.0297,-0.0337 -0.0788,-2.43947 -0.10887,-5.34639 z m 26.05254,1.44738 -0.0179,-4.63809 12.89613,-0.0563 12.89612,-0.0563 0.02,4.63882 0.02,4.63883 -12.8982,0.0556 -12.8982,0.0556 z m -0.0643,-14.93399 -0.0179,-4.63809 12.89613,-0.0563 12.89613,-0.0563 0.02,4.63882 0.02,4.63883 -12.89821,0.0556 -12.8982,0.0556 z m 32.35519,-0.53703 -0.0856,-19.96921039 4.63827,-0.0179 4.63827,-0.0179 0.0861,19.96713039 0.086,19.96713 -4.63874,0.02 -4.63874,0.02 z m 16.24404,15.14825 -0.0179,-4.63672 5.71018,-0.0276 5.710186,-0.0276 0.43219,-0.29198 0.43218,-0.29197 0.25988,-0.75812 c 0.4554,-1.32843 0.10327,-3.17094 -0.77425,-4.05128 l -0.41952,-0.42155 -1.56931,-0.0722 c -2.7417,-0.12619 -4.765446,-0.82215 -6.781176,-2.33203 l -0.98029,-0.73427 -0.88919,-1.12533 c -3.06162,-3.87467 -3.62868,-9.24979 -1.45164,-13.7597904 0.22838,-0.47311 0.80663,-1.37128 1.28501,-1.99595 l 0.86978,-1.13578 1.0801,-0.84056 c 1.39209,-1.0834 2.89129,-1.81015999 4.714836,-2.28562999 l 1.4585,-0.38028 8.22764,-0.0666 L 118.9945,1.6064453e-6 119.0173,4.6943816 l 0.0228,4.69439 -7.9562,0.0573 -7.95622,0.0573 -0.61605,0.34615 -0.61605,0.3461504 -0.3508,0.6104 -0.35079,0.6104 0.0201,1.16401 0.0201,1.16402 0.36797,0.61231 0.36798,0.61232 0.40429,0.17946 c 0.22231,0.0987 0.90218,0.19237 1.51074,0.20816 2.25358,0.0585 4.33469,0.66706 6.04889,1.76892 l 1.01913,0.6551 1.13391,1.24246 c 1.32515,1.45206 1.96527,2.49018 2.58414,4.19099 0.62302,1.71224 0.86614,3.32236 0.8122,5.37905 l -0.0461,1.75742 -0.57988,1.74998 -0.57987,1.74999 -0.69602,1.04656 c -1.70288,2.56052 -4.0019,4.13781 -7.04043,4.8303 l -1.08523,0.24732 -5.921346,0.0437 c -3.25674,0.0241 -5.94953,0.0158 -5.98397,-0.0184 -0.0344,-0.0341 -0.0707,-2.14862 -0.0805,-4.69881 z"
      />
    </svg>
  </a>
  <ul class="hidden gap-8 lg:flex">
    <Navigation></Navigation>
  </ul>
  <button class="lg:hidden" use:melt={$trigger}><Menu></Menu></button>
  <div class="hidden scale-90 lg:block">
    <LightSwitch></LightSwitch>
  </div>
</header>

{#if $open}
  <div use:melt={$portalled}>
    <div
      class="fixed inset-0 z-50 w-screen bg-black/50"
      transition:fade={{ duration: 150 }}
      use:melt={$overlay}
    />
    <div
      class="absolute left-0 top-0 z-50 h-screen w-3/4 max-w-[350px] bg-neutral-100 p-6 shadow-lg transition-colors duration-1000
            focus:outline-none dark:bg-neutral-900"
      transition:fly={{
        x: -350,
        duration: 300,
        opacity: 1,
      }}
      use:melt={$content}
    >
      <div class="pb-8 text-2xl font-bold" use:melt={$title}>Menu</div>

      <ul class="flex flex-col gap-2">
        <Navigation></Navigation>
      </ul>

      <div class="absolute bottom-8 left-0 flex w-full justify-center">
        <LightSwitch></LightSwitch>
      </div>
    </div>
  </div>
{/if}
